<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>GOAT Awards Voting</title>
<style>
body {
    margin:0;
    font-family: 'Arial', sans-serif;
    background: linear-gradient(135deg, #0f2027, #203a43, #2c5364);
    color:#fff;
    text-align:center;
}
h1 {
    font-size: 36px;
    margin-top:20px;
    text-shadow: 2px 2px #000;
}
.card {
    background: rgba(0,0,0,0.7);
    width: 90%;
    max-width: 500px;
    margin: 20px auto;
    padding: 20px;
    border-radius:15px;
    box-shadow:0 0 20px rgba(0,0,0,0.5);
}
.nominees {
    display:flex;
    justify-content: space-around;
    align-items:center;
    margin: 10px 0;
}
.nominee-img {
    width: 120px;
    height: 120px;
    object-fit: cover;
    border-radius:50%;
    border: 3px solid #fff;
    transition: all 0.3s;
}
button.voteBtn {
    padding:10px 20px;
    margin:10px;
    font-size:16px;
    font-weight:bold;
    border:none;
    border-radius:5px;
    cursor:pointer;
    background:#e63946;
    color:#fff;
}
button.voteBtn:disabled {
    background:#555;
    cursor:not-allowed;
}
.votes {
    font-size:22px;
    font-weight:bold;
    color:#ffcc00;
    margin-top:5px;
}
.comment-section {
    background: rgba(255,255,255,0.1);
    padding:10px;
    margin-top:20px;
    border-radius:10px;
    text-align:left;
    max-height:250px;
    overflow-y:auto;
    display:none;
}
.comment {
    background: rgba(0,0,0,0.3);
    margin:5px 0;
    padding:5px 10px;
    border-radius:5px;
}
#countdown {
    font-size:20px;
    font-weight:bold;
    margin-top:10px;
    color:#ff4444;
}
.share-section {
    margin-top:15px;
}
.share-section button {
    padding:8px 15px;
    margin:5px;
    font-size:14px;
    border-radius:5px;
    border:none;
    background:#00b894;
    color:white;
    cursor:pointer;
}
.tiktok-follow {
    margin-top:10px;
    font-size:16px;
}
.tiktok-follow a {
    color:#fff;
    text-decoration:none;
    font-weight:bold;
    font-size:20px;
}
#sharePopup button {
    display:block;
    margin:5px auto;
    padding:5px 10px;
    width:70%;
    font-size:14px;
    border:none;
    border-radius:5px;
    cursor:pointer;
}
.glow {
    box-shadow: 0 0 15px #ffcc00;
}
</style>
</head>
<body>

<h1>GOAT Awards Voting</h1>

<div id="countdown"></div>

<div class="card">
    <h2>Category 1: GOAT</h2>
    <div class="nominees">
        <img src="https://i.ibb.co/GQW8P8qN/images-16.jpg" class="nominee-img" alt="Messi" id="imgA">
        <img src="https://i.ibb.co/VWCzf1QP/images.jpg" class="nominee-img" alt="Ronaldo" id="imgB">
    </div>
    <div>
        <button class="voteBtn" onclick="vote('A')">Vote Messi</button>
        <button class="voteBtn" onclick="vote('B')">Vote Ronaldo</button>
    </div>
    <p class="votes">Messi: <span id="voteA">0</span></p>
    <p class="votes">Ronaldo: <span id="voteB">0</span></p>
</div>

<div class="card">
    <button onclick="toggleComments()">View Comments</button>
    <div class="comment-section" id="comments">
        <input type="text" id="commentInput" placeholder="Write your comment..." style="width:70%;padding:5px;">
        <button onclick="addComment()">Post</button>
    </div>
</div>

<div class="share-section">
    <button onclick="toggleSharePopup()">Share</button>
    <div id="sharePopup" style="display:none; margin-top:10px;">
        <button onclick="shareWhatsApp()">WhatsApp</button>
        <button onclick="shareFacebook()">Facebook</button>
        <button onclick="shareTwitter()">Twitter</button>
        <button onclick="shareMessenger()">Messenger</button>
        <button onclick="shareChrome()">Chrome</button>
    </div>
</div>

<div class="tiktok-follow">
    <a href="https://www.tiktok.com/@prof.lord.peps?_r=1&_t=ZS-91yYLzVtT32" target="_blank">ðŸŽµ Follow on TikTok</a>
</div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/12.6.0/firebase-app.js";
import { getDatabase, ref, get, set, onValue } from "https://www.gstatic.com/firebasejs/12.6.0/firebase-database.js";

const firebaseConfig = {
    apiKey: "AIzaSyAT9v-MfKjPpBHT58Iwt8JznDvwRjPIhqs",
    authDomain: "goat-awards.firebaseapp.com",
    projectId: "goat-awards",
    storageBucket: "goat-awards.firebasestorage.app",
    messagingSenderId: "210046042590",
    appId: "1:210046042590:web:b9473b14f8834fe0521d4f"
};
const app = initializeApp(firebaseConfig);
const db = getDatabase(app);

let userVoteTime = null;
let userVoteId = null;
let commentList = [];

const startingVotes = {A:1823441, B:1895755};

function countdown() {
    const endDate = new Date("Dec 23, 2025 23:59:59").getTime();
    setInterval(() => {
        let now = new Date().getTime();
        let distance = endDate - now;
        if(distance<0){
            document.getElementById('countdown').innerText="Voting ended!";
            return;
        }
        let days = Math.floor(distance/(1000*60*60*24));
        let hours = Math.floor((distance%(1000*60*60*24))/(1000*60*60));
        let minutes = Math.floor((distance%(1000*60*60))/(1000*60));
        let seconds = Math.floor((distance%(1000*60))/1000);
        document.getElementById('countdown').innerText = `Time left: ${days}d ${hours}h ${minutes}m ${seconds}s`;
    },1000);
}

// Load votes live
function loadVotes(){
    const votesRef = ref(db,'votes');
    onValue(votesRef, (snapshot)=>{
        const data = snapshot.val() || startingVotes;
        document.getElementById("voteA").innerText = data.A;
        document.getElementById("voteB").innerText = data.B;

        // glow for leading
        if(data.A>data.B){
            document.getElementById("imgA").classList.add("glow");
            document.getElementById("imgB").classList.remove("glow");
        } else if(data.B>data.A){
            document.getElementById("imgB").classList.add("glow");
            document.getElementById("imgA").classList.remove("glow");
        }
    });
}

function vote(person){
    const now = new Date().getTime();
    if(userVoteTime && now - userVoteTime < 30*60*1000){
        alert("You can vote again after 30 minutes!");
        return;
    }
    const votesRef = ref(db,'votes');
    get(votesRef).then(snapshot=>{
        let votes = snapshot.val() || startingVotes;
        votes[person]++;
        set(votesRef,votes);
        userVoteTime = now;
    });
}

// Comments
function toggleComments(){
    const c = document.getElementById('comments');
    c.style.display = c.style.display==='none'?'block':'none';
}

function loadComments(){
    const commentsRef = ref(db,'comments');
    onValue(commentsRef,(snapshot)=>{
        commentList = snapshot.val() || [];
        renderComments();
    });
}

function renderComments(){
    const cDiv = document.getElementById('comments');
    let html = `<input type="text" id="commentInput" placeholder="Write your comment..." style="width:70%;padding:5px;">
                <button onclick="addComment()">Post</button>`;
    commentList.slice(-50).reverse().forEach(c=>{
        html += `<div class="comment"><b>${c.user}</b>: ${c.text} <br><i>${c.time}</i></div>`;
    });
    cDiv.innerHTML = html;
}

function addComment(){
    const input = document.getElementById('commentInput');
    if(!input.value.trim()) return;
    const now = new Date();
    const newComment = {
        user:'Fan'+(commentList.length+1),
        text: input.value,
        time: now.toLocaleString()
    };
    commentList.push(newComment);
    set(ref(db,'comments'),commentList);
    input.value='';
}

// Share section
function toggleSharePopup(){
    const popup = document.getElementById('sharePopup');
    popup.style.display = popup.style.display==='none'?'block':'none';
}
const shareText = "Vote for the GOAT Awards! âš½ Messi or Ronaldo? Support your GOAT now!";
function shareWhatsApp(){ window.open(`https://api.whatsapp.com/send?text=${encodeURIComponent(shareText)}`);}
function shareFacebook(){ window.open(`https://www.facebook.com/sharer/sharer.php?u=&quote=${encodeURIComponent(shareText)}`);}
function shareTwitter(){ window.open(`https://twitter.com/intent/tweet?text=${encodeURIComponent(shareText)}`);}
function shareMessenger(){ window.open(`fb-messenger://share?link=&app_id=123456&redirect_uri=&quote=${encodeURIComponent(shareText)}`);}
function shareChrome(){ alert("Copy this link to share: " + shareText);}
    
window.onload = ()=>{
    countdown();
    loadVotes();
    loadComments();
};
</script>
</body>
</html>
