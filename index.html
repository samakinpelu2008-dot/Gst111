<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Messi vs Ronaldo GOATs Award</title>
<style>
/* ====== CSS ====== */
body { font-family: Arial, sans-serif; background:#f5f5f5; margin:0; padding:0; text-align:center; }
h1 { margin-top:20px; font-size:32px; color:#222; }
button { padding:12px 20px; border:none; border-radius:8px; background:#007bff; color:white; cursor:pointer; font-size:16px; margin-top:10px; }
button:hover { background:#0056b3; }
#container { display:flex; justify-content:center; flex-wrap:wrap; margin-top:30px; }
.card { background:white; padding:20px; border-radius:15px; margin:15px; width:300px; box-shadow:0 0 10px rgba(0,0,0,0.2); }
.player { width:200px; border-radius:10px; }
.bar-container { background:#ddd; border-radius:20px; width:100%; height:20px; margin:10px 0; }
.bar { height:20px; border-radius:20px; text-align:center; color:white; font-weight:bold; line-height:20px; }
#countdown { font-size:22px; margin-top:20px; font-weight:bold; }
#redirect-warning { color:red; font-weight:bold; margin-top:20px; display:none; }
.comment-section { max-width:600px; margin:20px auto; text-align:left; }
.comment { border-bottom:1px solid #ddd; padding:10px 0; }
.comment-username { font-weight:bold; }
.comment-time { color:#666; font-size:12px; }
#view-more { display:block; margin:10px auto; padding:10px 15px; cursor:pointer; background:#28a745; color:white; border-radius:8px; }
.share-section { margin-top:30px; }
.share-section button { margin:5px; }
.tiktok-section { margin-top:20px; background:#ff0050; color:white; padding:10px; border-radius:8px; display:inline-block; }
.tiktok-section a { color:white; text-decoration:none; font-weight:bold; }
#comment-box { display:none; margin-bottom:20px; }
textarea, input { width:100%; padding:8px; margin-bottom:10px; border-radius:5px; border:1px solid #ccc; }
</style>
</head>
<body>

<h1>Messi vs Ronaldo GOATs Award</h1>

<div id="countdown"></div>

<div id="container">
  <div class="card">
    <img src="https://i.ibb.co/GQW8P8qN/images-16.jpg" class="player" alt="Messi">
    <h2>Messi</h2>
    <button onclick="vote('messi')">Vote Messi</button>
    <p id="messi-count">1,672,448</p>
    <div class="bar-container">
      <div id="messi-bar" class="bar" style="width:45%;background:#1E90FF;">45%</div>
    </div>
  </div>

  <div class="card">
    <img src="https://i.ibb.co/VWCzf1QP/images.jpg" class="player" alt="Ronaldo">
    <h2>Cristiano Ronaldo</h2>
    <button onclick="vote('ronaldo')">Vote Ronaldo</button>
    <p id="ronaldo-count">1,895,755</p>
    <div class="bar-container">
      <div id="ronaldo-bar" class="bar" style="width:55%;background:#FF4500;">55%</div>
    </div>
  </div>
</div>

<!-- Redirect to Comments -->
<div style="margin-top:30px;">
  <button onclick="goRedirect()">View Comments</button>
</div>

<p id="redirect-warning">Don't mind the redirect. Click again to open the actual comments section.</p>

<!-- Comment Section -->
<div id="comment-box">
  <input type="text" id="username" placeholder="Username"><br>
  <textarea id="comment-text" placeholder="Write your comment"></textarea><br>
  <button onclick="addComment()">Post Comment</button>
</div>
<div class="comment-section" id="comments"></div>
<button id="view-more" onclick="loadMore()">View More Comments</button>

<!-- Share Section -->
<div class="share-section">
  <p>Share to support your GOAT!</p>
  <button onclick="share('whatsapp')">WhatsApp</button>
  <button onclick="share('facebook')">Facebook</button>
  <button onclick="share('twitter')">X</button>
  <button onclick="share('telegram')">Telegram</button>
  <button onclick="copyLink()">Copy Link</button>
</div>

<!-- TikTok Follow -->
<div class="tiktok-section">
  Follow for more on TikTok: <a href="https://www.tiktok.com/@prof.lord.peps?_r=1&_t=ZS-91yYLzVtT32" target="_blank">@prof.lord.peps</a>
</div>

<!-- Firebase -->
<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/12.6.0/firebase-app.js";
  import { getDatabase, ref, onValue, set, get, update } from "https://www.gstatic.com/firebasejs/12.6.0/firebase-database.js";

  const firebaseConfig = {
    apiKey: "AIzaSyB12392sEB9g1YFB9IimSR5crStMtiCej4",
    authDomain: "goatawards-c9492.firebaseapp.com",
    projectId: "goatawards-c9492",
    storageBucket: "goatawards-c9492.firebasestorage.app",
    messagingSenderId: "769373875392",
    appId: "1:769373875392:web:08d553f8c561577941d125",
    databaseURL: "https://goatawards-c9492-default-rtdb.firebaseio.com/"
  };

  const app = initializeApp(firebaseConfig);
  const db = getDatabase(app);

  const votesRef = ref(db, 'votes');

  function updateVotesDisplay(data){
    const votes = data.val();
    let total = votes.messi + votes.ronaldo;
    document.getElementById("messi-count").innerText = votes.messi.toLocaleString();
    document.getElementById("ronaldo-count").innerText = votes.ronaldo.toLocaleString();
    document.getElementById("messi-bar").style.width = ((votes.messi/total)*100).toFixed(1)+"%";
    document.getElementById("messi-bar").innerText = ((votes.messi/total)*100).toFixed(1)+"%";
    document.getElementById("ronaldo-bar").style.width = ((votes.ronaldo/total)*100).toFixed(1)+"%";
    document.getElementById("ronaldo-bar").innerText = ((votes.ronaldo/total)*100).toFixed(1)+"%";
  }

  onValue(votesRef, (snapshot) => {
    updateVotesDisplay(snapshot);
  });

  function vote(player){
    get(votesRef).then(snapshot=>{
      let votesData = snapshot.val();
      votesData[player]++;
      set(votesRef, votesData);
    });
  }
</script>

<script>
// ====== Countdown Timer ======
let countdownDate = new Date("Dec 23, 2025 23:59:59").getTime();
let x = setInterval(()=>{
  let now = new Date().getTime();
  let distance = countdownDate - now;
  if(distance<0){ clearInterval(x); document.getElementById("countdown").innerText="Voting Closed â€” Winner will be announced on 24th December!"; return; }
  let days=Math.floor(distance/(1000*60*60*24));
  let hours=Math.floor((distance%(1000*60*60*24))/(1000*60*60));
  let minutes=Math.floor((distance%(1000*60*60))/(1000*60));
  let seconds=Math.floor((distance%(1000*60))/1000);
  document.getElementById("countdown").innerText=`Voting ends in ${days}d ${hours}h ${minutes}m ${seconds}s`;
},1000);

// ====== Redirect Logic ======
let redirectClicked = false;
function goRedirect(){
  if(!redirectClicked){
    redirectClicked = true;
    document.getElementById("redirect-warning").style.display="block";
  } else {
    document.getElementById("redirect-warning").style.display="none";
    document.getElementById("comment-box").style.display="block";
    loadMore();
  }
}

// ====== Comments ======
let fakeComments = [];
for(let i=1;i<=60;i++){
    let randomTime = new Date(2025,10,25 + Math.floor(Math.random()*30),9 + Math.floor(Math.random()*14),Math.floor(Math.random()*60));
    fakeComments.push({username:"User"+(i%15+1), text:"This is a GOAT comment #"+i, time:randomTime.toLocaleString()});
}
let commentsContainer = document.getElementById("comments");
let commentsLoaded = 0;
let loadStep = 20;

function loadMore(){
  let max = Math.min(commentsLoaded+loadStep, fakeComments.length);
  for(let i=commentsLoaded;i<max;i++){
    let c = document.createElement("div");
    c.className="comment";
    c.innerHTML=`<span class="comment-username">${fakeComments[i].username}</span>: ${fakeComments[i].text}<br><span class="comment-time">${fakeComments[i].time}</span>`;
    commentsContainer.appendChild(c);
  }
  commentsLoaded = max;
  if(commentsLoaded>=fakeComments.length){
    document.getElementById("view-more").innerText="Unable to load previous comments";
    document.getElementById("view-more").disabled=true;
  }
}

function addComment(){
  let u=document.getElementById("username").value||"Anonymous";
  let t=document.getElementById("comment-text").value;
  if(!t) return alert("Comment cannot be empty!");
  let d=new Date().toLocaleString();
  let c=document.createElement("div");
  c.className="comment";
  c.innerHTML=`<span class="comment-username">${u}</span>: ${t}<br><span class="comment-time">${d}</span>`;
  commentsContainer.prepend(c);
  document.getElementById("comment-text").value="";
}

// Auto-generate new comments every minute
setInterval(()=>{
  for(let i=0;i<10;i++){
    let d=new Date();
    let c=document.createElement("div");
    c.className="comment";
    c.innerHTML=`<span class="comment-username">User${Math.floor(Math.random()*15+1)}</span>: This is a new comment<br><span class="comment-time">${d.toLocaleString()}</span>`;
    commentsContainer.prepend(c);
  }
},60000);

// Share Buttons
function share(platform){
  let url=encodeURIComponent(window.location.href);
  let text=encodeURIComponent("Support your GOAT now! Messi or Ronaldo?");
  let shareUrl="";
  if(platform==="whatsapp") shareUrl=`https://wa.me/?text=${text}%20${url}`;
  if(platform==="facebook") shareUrl=`https://www.facebook.com/sharer/sharer.php?u=${url}`;
  if(platform==="twitter") shareUrl=`https://twitter.com/intent/tweet?text=${text}&url=${url}`;
  if(platform==="telegram") shareUrl=`https://t.me/share/url?url=${url}&text=${text}`;
  window.open(shareUrl,"_blank");
}
function copyLink(){ navigator.clipboard.writeText(window.location.href); alert("Link copied!"); }
</script>
</body>
</html>
