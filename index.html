<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>GOAT Awards Voting</title>
<style>
body {
    margin:0;
    font-family: 'Arial', sans-serif;
    background: linear-gradient(135deg, #0f2027, #203a43, #2c5364);
    color:#fff;
    text-align:center;
}
h1 {
    font-size: 36px;
    margin-top:20px;
    text-shadow: 2px 2px #000;
}
.card {
    background: rgba(0,0,0,0.7);
    width: 320px;
    margin: 20px auto;
    padding: 20px;
    border-radius:15px;
    box-shadow:0 0 20px rgba(0,0,0,0.5);
}
.nominee-img {
    width: 120px;
    height: 120px;
    object-fit: cover;
    border-radius:50%;
    margin: 10px;
    border: 3px solid #fff;
}
button.voteBtn {
    padding:10px 20px;
    margin:10px;
    font-size:16px;
    font-weight:bold;
    border:none;
    border-radius:5px;
    cursor:pointer;
    background:#e63946;
    color:#fff;
}
button.voteBtn:disabled {
    background:#555;
    cursor:not-allowed;
}
.votes {
    font-size:22px;
    font-weight:bold;
    color:#ffcc00;
    margin-top:5px;
    animation: pop 0.5s;
}
@keyframes pop {
    0% {transform: scale(1);}
    50% {transform: scale(1.3);}
    100% {transform: scale(1);}
}
.comment-section {
    background: rgba(255,255,255,0.1);
    padding:10px;
    margin-top:20px;
    border-radius:10px;
    text-align:left;
    max-height:250px;
    overflow-y:auto;
}
.comment {
    background: rgba(0,0,0,0.3);
    margin:5px 0;
    padding:5px 10px;
    border-radius:5px;
}
#countdown {
    font-size:20px;
    font-weight:bold;
    margin-top:10px;
    color:#ff4444;
}
.share-section {
    margin-top:15px;
}
.share-section button {
    padding:8px 15px;
    margin:5px;
    font-size:14px;
    border-radius:5px;
    border:none;
    background:#00b894;
    color:white;
    cursor:pointer;
}
.tiktok-follow {
    margin-top:10px;
    font-size:16px;
}
.tiktok-follow a {
    color:#ffe400;
    text-decoration:none;
    font-weight:bold;
}
</style>
</head>
<body>

<h1>GOAT Awards Voting</h1>

<div id="countdown"></div>

<div class="card">
    <h2>Category 1: GOAT</h2>
    <div>
        <img src="https://i.ibb.co/GQW8P8qN/images-16.jpg" class="nominee-img" alt="Messi">
        <img src="https://i.ibb.co/VWCzf1QP/images.jpg" class="nominee-img" alt="Ronaldo">
    </div>
    <div>
        <button class="voteBtn" onclick="vote('A')">Vote Messi</button>
        <button class="voteBtn" onclick="vote('B')">Vote Ronaldo</button>
    </div>
    <p class="votes">Messi: <span id="voteA">0</span></p>
    <p class="votes">Ronaldo: <span id="voteB">0</span></p>
</div>

<div class="card">
    <h3>Comments</h3>
    <div class="comment-section" id="comments"></div>
    <input type="text" id="commentInput" placeholder="Write your comment..." style="width:70%;padding:5px;">
    <button onclick="addComment()">Post</button>
</div>

<div class="share-section">
    <button onclick="shareLink()">Share on Social Media</button>
</div>

<div class="tiktok-follow">
    Follow for more: <a href="https://www.tiktok.com/@prof.lord.peps?_r=1&_t=ZS-91yYLzVtT32" target="_blank">@prof.lord.peps</a>
</div>

<script>
const DB_URL = "https://goatawards-c9492-default-rtdb.firebaseio.com/";
let userVote = null;

// Start votes
const startingVotes = { A:1623441, B:1895755 };

// Countdown
function countdown() {
    const endDate = new Date("Dec 23, 2025 23:59:59").getTime();
    setInterval(() => {
        let now = new Date().getTime();
        let distance = endDate - now;
        if(distance<0){
            document.getElementById('countdown').innerText="Voting ended!";
            return;
        }
        let days = Math.floor(distance/(1000*60*60*24));
        let hours = Math.floor((distance%(1000*60*60*24))/(1000*60*60));
        let minutes = Math.floor((distance%(1000*60*60))/(1000*60));
        let seconds = Math.floor((distance%(1000*60))/1000);
        document.getElementById('countdown').innerText = `Time left: ${days}d ${hours}h ${minutes}m ${seconds}s`;
    },1000);
}

// Load votes
function loadVotes(){
    fetch(DB_URL+'votes.json')
    .then(res=>res.json())
    .then(data=>{
        if(!data){
            // First load, set starting votes
            fetch(DB_URL+'votes.json',{
                method:'PUT',
                body: JSON.stringify(startingVotes)
            });
            data = startingVotes;
        }
        document.getElementById("voteA").innerText=data.A;
        document.getElementById("voteB").innerText=data.B;
    });
}

// Vote function
function vote(person){
    if(userVote===person){
        alert("You already voted for this nominee!");
        return;
    }
    fetch(DB_URL+'votes.json')
    .then(res=>res.json())
    .then(data=>{
        if(!data)data=startingVotes;
        if(person==='A') data.A++;
        if(person==='B') data.B++;
        fetch(DB_URL+'votes.json',{
            method:'PUT',
            body: JSON.stringify(data)
        }).then(()=>{
            loadVotes();
            userVote=person;
        });
    });
}

// Comments
let commentList=[];
function loadComments(){
    fetch(DB_URL+'comments.json')
    .then(res=>res.json())
    .then(data=>{
        if(!data){
            commentList=[
                {user:'Fan123',text:'CR7 is the real GOAT! ðŸ',time:'Nov 23 12:15'},
                {user:'MessiFan',text:'Messi all day âš½ðŸ”¥',time:'Nov 23 13:22'},
                {user:'SoccerKing',text:'Ronaldo has no World Cup lol',time:'Nov 23 14:10'}
            ];
            fetch(DB_URL+'comments.json',{method:'PUT',body:JSON.stringify(commentList)});
        }else{
            commentList=data;
        }
        renderComments();
    });
}
function renderComments(){
    const cDiv=document.getElementById('comments');
    cDiv.innerHTML='';
    commentList.forEach(c=>{
        const div=document.createElement('div');
        div.className='comment';
        div.innerHTML=`<b>${c.user}</b>: ${c.text} <br><i>${c.time}</i>`;
        cDiv.appendChild(div);
    });
}
function addComment(){
    const input=document.getElementById('commentInput');
    if(input.value.trim()==='') return;
    const newComment={user:'You',text:input.value,time:new Date().toLocaleString()};
    commentList.push(newComment);
    fetch(DB_URL+'comments.json',{method:'PUT',body:JSON.stringify(commentList)})
    .then(()=>{
        renderComments();
        input.value='';
    });
}

// Share
function shareLink(){
    const shareText=`Vote now for the GOAT Awards! âš½ðŸ”¥ Messi or Ronaldo? Click here and support your GOAT!`;
    window.open(`https://twitter.com/intent/tweet?text=${encodeURIComponent(shareText)}`);
}

window.onload=function(){
    countdown();
    loadVotes();
    loadComments();
};
</script>

</body>
</html>
